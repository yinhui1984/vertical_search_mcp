# å‚ç›´æœç´¢ MCP é¡¹ç›®è¿­ä»£å¼€å‘ TODO

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

**é¡¹ç›®ç›®æ ‡**: æ„å»ºå¯æ‰©å±•çš„å‚ç›´æœç´¢ MCPï¼Œæ”¯æŒå¤šå¹³å°ï¼ˆå¾®ä¿¡ã€çŸ¥ä¹ç­‰ï¼‰  
**æŠ€æœ¯æ ˆ**: Python 3.12+, Playwright, pytest  
**é¢„è®¡æ€»æ—¶é—´**: 4-5 å¤©ï¼ˆæŒ‰æ–‡æ¡£ï¼‰  
**ä»£ç è´¨é‡è¦æ±‚**: æµ‹è¯•è¦†ç›–ç‡ > 80%ï¼Œç±»å‹æ³¨è§£å®Œæ•´

### âš ï¸ é‡è¦ï¼šè™šæ‹Ÿç¯å¢ƒä½¿ç”¨è¯´æ˜

**æœ¬é¡¹ç›®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼ˆ`.venv`ï¼‰ï¼Œæ‰€æœ‰ Python/pip å‘½ä»¤å¿…é¡»åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œï¼**

**åœ¨è¿è¡Œä»»ä½•å‘½ä»¤ä¹‹å‰ï¼Œå¿…é¡»å…ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š**

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate

# ç„¶åæ‰èƒ½è¿è¡Œå‘½ä»¤
python -m pytest tests/
pip install package_name
python -m mypy core/
```

**å¦‚æœä¸æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼Œå‘½ä»¤ä¼šåœ¨å…¨å±€ç¯å¢ƒä¸­è¿è¡Œå¹¶å¤±è´¥ï¼**

**æç¤º**ï¼šå¦‚æœä½¿ç”¨ Makefileï¼Œå®ƒä¼šè‡ªåŠ¨å¤„ç†è™šæ‹Ÿç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥è¿è¡Œ `make test` ç­‰å‘½ä»¤ã€‚

---


## ğŸ“Š è¿­ä»£æ—¶é—´è¡¨

| è¿­ä»£ | åç§° | é¢„è®¡æ—¶é—´ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|------|------|----------|--------|------|
| Iteration 0 | é¡¹ç›®åˆå§‹åŒ– | 0.5 å¤© | P0 | âœ… å·²å®Œæˆ |
| Iteration 1 | æµè§ˆå™¨æ± ä¸ç¼“å­˜ | 1-1.5 å¤© | P0 | âœ… å·²å®Œæˆ |
| Iteration 2 | åŸºç±»ä¸ç®¡ç†å™¨ | 0.5 å¤© | P0 | âœ… å·²å®Œæˆ |
| Iteration 3 | å¾®ä¿¡æœç´¢é‡æ„ | 1-1.5 å¤© | P0 | âœ… å·²å®Œæˆ |
| Iteration 4 | çŸ¥ä¹å¹³å°é›†æˆ | 1 å¤© | P1 | âœ… å·²å®Œæˆ |
| Iteration 5 | MCP æœåŠ¡å™¨é›†æˆ | 0.5 å¤© | P0 | âœ… å·²å®Œæˆ |
| Iteration 6 | çœŸå®é“¾æ¥è·å– | 1-1.5 å¤© | P0 | âœ… å·²å®Œæˆ (2026-01-06) |
| Iteration 7 | æ—¥å¿—ç³»ç»Ÿ | 0.5 å¤© | P1 | âœ… å·²å®Œæˆ (2026-01-06) |
| Iteration 8 | åçˆ¬è™«åº”å¯¹ç­–ç•¥ | 0.5 å¤© | P1 | âœ… å·²å®Œæˆ (2026-01-06) |
| Iteration 9 | æ–‡ç« å†…å®¹è·å–ä¸æ™ºèƒ½å‹ç¼© | 1.5 å¤© | P1 | âœ… å·²å®Œæˆ (2026-01-06) |
| Iteration 10 | å¼‚æ­¥ä»»åŠ¡è®¾è®¡ - ç»Ÿä¸€å¼‚æ­¥æ¨¡å¼ | 1 å¤© | P1 | âœ… å·²å®Œæˆ (2026-01-06) |
| Iteration 11 | Google Custom Search æ”¯æŒ | 1 å¤© | P1 | âœ… å·²å®Œæˆ (2026-01-06) |
| Iteration 12 | å¤šå¹³å°æœç´¢æ”¯æŒ | 1.5 å¤© | P1 | ğŸ”„ è¿›è¡Œä¸­ |

**æ€»è®¡**: 12-14.5 å¤©

---

## ğŸ¯ é‡Œç¨‹ç¢‘

### Milestone 1: æ ¸å¿ƒæ¶æ„å®Œæˆ (Iteration 0-2)
- âœ… é¡¹ç›®ç»“æ„æ­å»ºå®Œæˆ
- âœ… æµè§ˆå™¨æ± å’Œç¼“å­˜å®ç°å®Œæˆ
- âœ… åŸºç±»å’Œç®¡ç†å™¨å®ç°å®Œæˆ

### Milestone 2: åŠŸèƒ½å¯ç”¨ (Iteration 3-5)
- âœ… å¾®ä¿¡æœç´¢åŠŸèƒ½æ­£å¸¸
- âœ… çŸ¥ä¹æœç´¢åŠŸèƒ½æ­£å¸¸
- âœ… MCP æœåŠ¡å™¨å¯è°ƒç”¨

### Milestone 3: åŠŸèƒ½å®Œå–„ (Iteration 6)
- âœ… çœŸå®é“¾æ¥è·å–åŠŸèƒ½æ­£å¸¸ï¼ˆä½¿ç”¨ Playwright ç‚¹å‡»é“¾æ¥æ–¹æ³•ï¼‰
- âœ… URL è§£ææ€§èƒ½è¾¾æ ‡ï¼ˆå¾®ä¿¡å’ŒçŸ¥ä¹é“¾æ¥è§£ææˆåŠŸï¼‰
- âœ… æ‰€æœ‰ç±»å‹æ£€æŸ¥å’Œä»£ç è´¨é‡æ£€æŸ¥é€šè¿‡

### Milestone 4: åŠŸèƒ½å¢å¼º (Iteration 7-9)
- âœ… æ—¥å¿—ç³»ç»Ÿå®Œå–„ï¼ˆIteration 7ï¼‰
- âœ… åçˆ¬è™«åº”å¯¹ç­–ç•¥ç”Ÿæ•ˆï¼ˆåŒ…æ‹¬ç™»å½•å¢™å¤„ç†ï¼‰ï¼ˆIteration 8ï¼‰
- âœ… æ–‡ç« å†…å®¹è·å–ä¸æ™ºèƒ½å‹ç¼©åŠŸèƒ½ï¼ˆIteration 9ï¼‰

### Milestone 5: é•¿ä»»åŠ¡æ”¯æŒ (Iteration 10)
- âœ… å¼‚æ­¥ä»»åŠ¡æ¨¡å¼å®ç°ï¼ˆTaskManager + åå°æ‰§è¡Œï¼‰ï¼ˆIteration 10ï¼‰
- âœ… MCPå·¥å…·é›†æˆï¼ˆstart_vertical_search + get_search_statusï¼‰ï¼ˆIteration 10ï¼‰
- âœ… è¿›åº¦å›è°ƒæœºåˆ¶å®Œå–„ï¼ˆSearchManager + ContentProcessorï¼‰ï¼ˆIteration 10ï¼‰

### Milestone 6: å¹³å°æ‰©å±• (Iteration 11)
- âœ… Google Custom Search API é›†æˆï¼ˆIteration 11ï¼‰
- âœ… API-based æœç´¢å™¨æ¶æ„æ”¯æŒï¼ˆIteration 11ï¼‰
- âœ… å¤šå¹³å°æœç´¢èƒ½åŠ›æ‰©å±•ï¼ˆIteration 11ï¼‰

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **è™šæ‹Ÿç¯å¢ƒ**: âš ï¸ **æ‰€æœ‰ Python/pip å‘½ä»¤å¿…é¡»å…ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ**ï¼š`source .venv/bin/activate`ã€‚æˆ–ä½¿ç”¨ Makefileï¼ˆè‡ªåŠ¨å¤„ç†è™šæ‹Ÿç¯å¢ƒï¼‰
2. **ä¾èµ–å…³ç³»**: ä¸¥æ ¼æŒ‰ç…§è¿­ä»£é¡ºåºæ‰§è¡Œï¼Œä¸èƒ½è·³è¿‡
3. **æµ‹è¯•ä¼˜å…ˆ**: æ¯ä¸ªè¿­ä»£éƒ½è¦æœ‰å¯¹åº”çš„æµ‹è¯•
4. **ä»£ç å®¡æŸ¥**: æ¯ä¸ªè¿­ä»£å®Œæˆåè¿›è¡Œä»£ç å®¡æŸ¥
5. **æ–‡æ¡£åŒæ­¥**: ä»£ç å’Œæ–‡æ¡£åŒæ­¥æ›´æ–°
6. **æ€§èƒ½ç›‘æ§**: ä» Iteration 3 å¼€å§‹å…³æ³¨æ€§èƒ½æŒ‡æ ‡

---

## ğŸ”„ è¿­ä»£å›é¡¾

æ¯ä¸ªè¿­ä»£ç»“æŸåï¼Œè¿›è¡Œï¼š
- [ ] ä»£ç å®¡æŸ¥
- [ ] æµ‹è¯•éªŒè¯
- [ ] æ€§èƒ½æ£€æŸ¥
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] é—®é¢˜è®°å½•å’Œä¿®å¤

---

## ğŸ¯ è¿­ä»£è´¨é‡æ£€æŸ¥æ¸…å•

**æ¯ä¸ªè¿­ä»£å®Œæˆåï¼Œå¿…é¡»è¿è¡Œä»¥ä¸‹æ£€æŸ¥**:

### åŸºç¡€æ£€æŸ¥ï¼ˆæ‰€æœ‰è¿­ä»£ï¼‰

```bash
# 1. æµ‹è¯•é€šè¿‡
pytest tests/ -v

# 2. ç±»å‹æ£€æŸ¥é€šè¿‡ï¼ˆIteration 2 å¼€å§‹ï¼‰
mypy core/ platforms/ --strict

# 3. ä»£ç é£æ ¼æ£€æŸ¥ï¼ˆIteration 2 å¼€å§‹ï¼‰
flake8 core/ platforms/ --max-line-length=100

# 4. Gitæäº¤
git add .
git commit -m "feat(iteration-N): completed"
```

### æ€§èƒ½æ£€æŸ¥ï¼ˆIteration 3 å¼€å§‹ï¼‰

**âš ï¸ å…ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š`source .venv/bin/activate`**

```bash
# è¿è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•
pytest tests/benchmark/ -v

# éªŒè¯æ— æ€§èƒ½é€€åŒ–
# æ£€æŸ¥å“åº”æ—¶é—´æ˜¯å¦ç¬¦åˆé¢„æœŸ
```

**æˆ–ä½¿ç”¨ Makefileï¼š`make test-benchmark`**

### è¦†ç›–ç‡æ£€æŸ¥ï¼ˆIteration 9ï¼‰

**âš ï¸ å…ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š`source .venv/bin/activate`**

```bash
# æµ‹è¯•è¦†ç›–ç‡ > 80%
pytest --cov=. --cov-report=html --cov-report=term-missing

# æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Š
open htmlcov/index.html
```

**æˆ–ä½¿ç”¨ Makefileï¼š`make test-cov`**

### ä»£ç è´¨é‡æ£€æŸ¥ï¼ˆIteration 9ï¼‰

**âš ï¸ å…ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š`source .venv/bin/activate`**

```bash
# æ ¼å¼åŒ–ä»£ç 
black core/ platforms/ tests/

# ç±»å‹æ£€æŸ¥
mypy core/ platforms/ --strict

# Lint æ£€æŸ¥
flake8 core/ platforms/ tests/ --max-line-length=100

# å®‰å…¨æ£€æŸ¥ï¼ˆå¯é€‰ï¼‰
bandit -r core/ platforms/
```

**æˆ–ä½¿ç”¨ Makefileï¼š`make format lint type-check`**

### é›†æˆæµ‹è¯•ï¼ˆIteration 5 å¼€å§‹ï¼‰

**âš ï¸ å…ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š`source .venv/bin/activate`**

```bash
# æµ‹è¯• MCP æœåŠ¡å™¨
pytest tests/integration/test_mcp_server.py -v

# æµ‹è¯•ç«¯åˆ°ç«¯æµç¨‹
pytest tests/integration/ -v
```

**æˆ–ä½¿ç”¨ Makefileï¼š`make test-integration`**

### URL è§£ææµ‹è¯•ï¼ˆIteration 6ï¼‰

**âš ï¸ å…ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š`source .venv/bin/activate`**

```bash
# æµ‹è¯• URL è§£æåŠŸèƒ½
pytest tests/integration/test_url_resolver.py -v

# æµ‹è¯•ç«¯åˆ°ç«¯çœŸå®é“¾æ¥
pytest tests/integration/test_weixin_search.py::test_real_urls -v
pytest tests/integration/test_zhihu_search.py::test_real_urls -v
```

**æˆ–ä½¿ç”¨ Makefileï¼š`make test-integration`**

### å‹åŠ›æµ‹è¯•ï¼ˆIteration 9ï¼‰

**âš ï¸ å…ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š`source .venv/bin/activate`**

```bash
# å¹¶å‘æµ‹è¯•
pytest tests/load/test_concurrent.py -v

# é•¿æ—¶é—´è¿è¡Œæµ‹è¯•ï¼ˆå¯é€‰ï¼‰
pytest tests/load/test_long_running.py -v --duration=3600
```

**æˆ–ä½¿ç”¨ Makefileï¼š`make test-load`**

**å¦‚æœæ£€æŸ¥ä¸é€šè¿‡ï¼Œä¸è¦è¿›å…¥ä¸‹ä¸€ä¸ªè¿­ä»£ï¼**

---

**æœ€åæ›´æ–°**: 2026-01-06  
**ç»´æŠ¤è€…**: jaxk